<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.honeybae.project.mapper.AuctionMapper">
<!--
CREATE TABLE `auction` (
	`id` INT(11) NOT NULL AUTO_INCREMENT COMMENT 'idx',
	`product_id` INT(11) NOT NULL COMMENT '상품idx',
	`start_date` VARCHAR(45) NOT NULL COMMENT '시작시간' COLLATE 'utf8_general_ci',
	`end_date` VARCHAR(45) NOT NULL COMMENT '종료시간' COLLATE 'utf8_general_ci',
	`max_price` SMALLINT(6) NOT NULL COMMENT '현재가격',
	`auction_state` TINYINT(1) NOT NULL COMMENT '0:진행중1:종료 2:중지',
	PRIMARY KEY (`id`) USING BTREE,
	INDEX `FK_auction_product_id_product_id` (`product_id`) USING BTREE,
	CONSTRAINT `FK_auction_product_id_product_id` FOREIGN KEY (`product_id`) REFERENCES `jhbae`.`product` (`id`) ON UPDATE RESTRICT ON DELETE RESTRICT
)
COMMENT='경매'
COLLATE='utf8_general_ci'
ENGINE=InnoDB

-->
	<resultMap type="Auction" id="Auction">
		<result property="id" column="id" />
		<result property="productId" column="product_id" />
		<result property="startDate" column="start_date" />
		<result property="endDate" column="end_date" />
		<result property="currentPrice" column="current_price" />
		<result property="auctionState" column="auction_state" />
	</resultMap>

	<select id="selectByList" resultMap="Auction">
		SELECT		id
					,product_id
					,start_date
					,end_date
					,current_price
					,auction_state
		FROM 		auction
		WHERE		auction_state = 0
	</select>

	<select id="selectByOne" parameterType="int" resultMap="Auction">
		SELECT		id
					,product_id
					,start_date
					,end_date
					,current_price
					,auction_state
		FROM 		auction
		WHERE		id = #{id}
	</select>

	<insert id="insert" parameterType="Auction">
	 	INSERT	INTO auction
	 	(
	 				product_id
	 				,start_date
	 				,end_date
	 				,current_price
	 				,auction_state
	 	)
	 	VALUES
	 	(
	 				#{productId}
	 				,#{startDate}
	 				,#{endDate}
	 				,#{currentPrice}
	 				,#{auctionState}
	 	)
	</insert>
	

</mapper>